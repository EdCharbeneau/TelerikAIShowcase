@page "/"
@layout ChatLayout
@using AIShowcase.WebApp.Components.Generic
@using AIShowcase.WebApp.Services
@using AIShowcase.WebApp.Services.TextToSpeechServices
@using Microsoft.Extensions.AI
@using ai_demos.Services


@inject SemanticSearch Search
@inject IChatClient ai
@inject ITextToSpeechService tts
@inject NavigationTool navigationTool
@inject VoiceSettingsTool voiceSettingsTool
@inject ApplicationSettings settings

<SectionContent SectionId="ChatLayout.Sections.ChatOutput">
    <ChatOutput Messages="messages" StreamingText="@streamingText" IsThinking="isThinking" />
    <ChatSuggestions OnSelected="RespondWithStreamingText" @ref="chatSuggestions" />
</SectionContent>

<SectionContent SectionId="ChatLayout.Sections.ChatInput">
    <ChatInput @ref="ChatInputRef" OnSend="RespondWithStreamingText"
               OnSendSpeech="RespondWithSpeech" 
               OnSendImage="SubmitImage"
               OnMicrophoneStart="CreateListeningMessage"
               OnRestartChatClicked="RestartChat"/>
</SectionContent>
