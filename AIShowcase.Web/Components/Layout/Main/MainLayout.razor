@inherits LayoutComponentBase
@using AIShowcase.WebApp.MenuData

@* Master layout using Telerik components: Header(AppBar), Drawer Nav + Main content, Footer *@
<TelerikRootComponent>
	<div class="app-shell k-d-flex k-flex-col" style="min-height:100dvh;">
		<!-- Header -->
		<HeaderBar OnToggleDrawer="ToggleDrawer"/>

		<!-- Body: Nav + Main -->
		<div class="app-body k-d-flex k-flex-row k-flex-grow" style="min-height:0;">
			<TelerikDrawer Data="@menu.Items"
						   MiniMode="true"
						   Mode="@DrawerMode.Push"
						   @ref="DrawerRef"
						   @bind-Expanded="@DrawerExpanded"
						   @bind-SelectedItem="@SelectedDrawerItem"
						   Class="app-drawer"
						   Width="248px">
				<DrawerContent>
					<div class="app-main k-d-flex k-flex-col k-flex-grow" style="min-height:0;">
						<div class="app-main-scroll k-flex-grow k-overflow-auto k-p-4">
							@Body
						</div>
						<!-- Footer -->
						<footer class="app-footer k-text-center k-p-4 k-border-top" style="">
							<small>&copy; 2024 Progress Software. All rights reserved.</small>
						</footer>
					</div>
				</DrawerContent>
			</TelerikDrawer>
		</div>
	</div>
</TelerikRootComponent>

@code {
	private MainMenu menu = new();

	private TelerikDrawer<MenuItem>? DrawerRef { get; set; }
	private bool DrawerExpanded { get; set; } = true;

	private MenuItem _selectedDrawerItem = null!;
	private MenuItem SelectedDrawerItem
	{
		get => _selectedDrawerItem ?? menu.Items.First();
		set => _selectedDrawerItem = value;
	}

	private async Task ToggleDrawer() => await DrawerRef!.ToggleAsync();
}
